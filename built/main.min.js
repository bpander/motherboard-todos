var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){var d=s.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),k.apply(a,d.concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../../node_modules/almond/almond",function(){}),function(a,b){"function"==typeof define&&define.amd?define("xelement",b):"object"==typeof exports?module.exports=b():a.XElement=b()}(this,function(){var a,b,c,d,e,f;return a=function(){function a(a,b,c){this.target=a,this.type=b,this.handler=c,this.isEnabled=!1}return a.prototype.enable=function(){if(this.isEnabled!==!0){if(this.target instanceof EventTarget)this.target.addEventListener(this.type,this.handler);else if(this.target instanceof NodeList)for(var a=this.target.length;--a>-1;)this.target[a].addEventListener(this.type,this.handler);this.isEnabled=!0}},a.prototype.disable=function(){if(this.target instanceof EventTarget)this.target.removeEventListener(this.type,this.handler);else if(this.target instanceof NodeList)for(var a=this.target.length;--a>-1;)this.target[a].removeEventListener(this.type,this.handler);this.isEnabled=!1},a}(),b=function(){function a(a){this.attrDef=null,this.element=null,this.mqls=[],this.listener=Function.prototype,this.set(a)}return a.prototype.set=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.hasOwnProperty(b)&&(this[b]=a[b])},a.prototype.update=function(){if(this.mqls.forEach(function(a){a.removeListener(this.listener)},this),this.mqls=[],document.contains(this.element)!==!1){var a=this.attrDef.getPropertyName(),b=this.attrDef.parseResponsiveAttribute(this.element[a]),c=b.unmatched;this.listener=function(){var a=this.element[this.attrDef.getEvaluatedPropertyName()];a!==c&&(this.attrDef.mediaChangedCallback.call(this.element,c,a),c=a)}.bind(this),this.mqls=b.breakpoints.map(function(a){var b=window.matchMedia(a.mediaQuery);return b.matches&&(c=a.value),b.addListener(this.listener),b},this)}},a}(),c=function(a,b){var c={customAttributes:[],createdCallback:function(){this.bindings=[],this.mediaDefs=this.customAttributes.filter(function(a){return a.responsive===!0}).map(function(a){return new b({element:this,attrDef:a})},this)},attachedCallback:function(){this.mediaDefs.forEach(function(a){a.update()})},detachedCallback:function(){this.mediaDefs.forEach(function(a){a.update()})},attributeChangedCallback:function(a,b,c){var d=this.customAttributes.find(function(b){return b.name===a});if(void 0!==d){d.changedCallback.call(this,b,c);var e=this.mediaDefs.find(function(a){return a.attrDef===d});if(void 0!==e&&document.contains(this)!==!1){e.update();var f=null===b?""+d["default"]:b,g=d.evaluateResponsiveAttribute(f),h=this[d.getEvaluatedPropertyName()];g!==h&&d.mediaChangedCallback.call(this,g,h)}}},getComponent:function(a,b){var c=a.prototype.selector;return void 0!==b&&(c+='[data-tag="'+b+'"]'),this.querySelector(c)},getComponents:function(a,b){var c=a.prototype.selector;return void 0!==b&&(c+='[data-tag="'+b+'"]'),d(this.querySelectorAll(c))},findWithTag:function(a){return this.querySelector('[data-tag="'+a+'"]')},findAllWithTag:function(a){return d(this.querySelectorAll('[data-tag="'+a+'"]'))},createBinding:function(b,c,d){var e=new a(b,c,d.bind(this));return this.bindings.push(e),e},enable:function(){var a,b=this.bindings.length;for(a=0;b>a;a++)this.bindings[a].enable()},disable:function(){var a,b=this.bindings.length;for(a=0;b>a;a++)this.bindings[a].disable()},trigger:function(a,b){var c=new CustomEvent(a,{detail:b,bubbles:!0});return this.dispatchEvent(c)}},d=function(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d];return c};return c}(a,b),d=function(){var a={};return a.toCamelCase=function(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})},a.capitalize=function(a){return a.replace(/./,function(a){return a.toUpperCase()})},a}(),e=function(a){function b(a,b){this.name=a,this.type=null,this["default"]=null,this.responsive=!1,this.mediaChangedCallback=Function.prototype,this.changedCallback=Function.prototype,this.set(b)}return b.prototype.set=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.hasOwnProperty(b)&&(this[b]=a[b])},b.prototype.getPropertyName=function(){return a.toCamelCase(this.name)},b.prototype.getEvaluatedPropertyName=function(){return"current"+a.capitalize(this.getPropertyName())},b.prototype.parseResponsiveAttribute=function(a){if(null===a)return{unmatched:null,breakpoints:[]};var b=a.split(",").map(function(a){return a.trim()}),c=b.pop();return this.type===Number&&(c=+c),{unmatched:c,breakpoints:b.map(function(a){var b=a.split(/\s(?=[^\s]*$)/),c=b[0],d=b[1];return this.type===Number&&(d=+d),{mediaQuery:c,value:d}},this)}},b.prototype.evaluateResponsiveAttribute=function(a){var b=this.parseResponsiveAttribute(a);return b.breakpoints.reduce(function(a,b){return window.matchMedia(b.mediaQuery).matches?b.value:a},b.unmatched)},b.prototype.addToPrototype=function(a){var b=this,c=this.getPropertyName();Object.defineProperty(a,c,{get:function(){var a=this.getAttribute(b.name);switch(b.type){case Number:if(b.responsive!==!0){if(null===a||""===a.trim()||isNaN(+a)){if(null===b["default"])return null;a=b["default"]}return+a}case String:if(null===a){if(null===b["default"])return null;a=b["default"]+""}return a;case Boolean:return null!==a}},set:function(a){switch(b.type){case Number:if(b.responsive!==!0){if(isNaN(+a))break;this.setAttribute(b.name,a);break}case String:this.setAttribute(b.name,a);break;case Boolean:a?this.setAttribute(b.name,""):this.removeAttribute(b.name)}}}),b.responsive===!0&&Object.defineProperty(a,this.getEvaluatedPropertyName(),{get:function(){return b.evaluateResponsiveAttribute(this[c])}})},b}(d),f=function(a,b){function c(){}c.attribute=function(a,c){return new b(a,c)},c.define=function(b,c){var d=HTMLElement,e=Object.assign(Object.create(d.prototype),a),g=Object.create(e);return Object.defineProperty(g,"selector",{value:b}),c(g,e),f(b,{prototype:g})},c.extend=function(){return"string"==typeof arguments[0]?d.apply(this,arguments):e.apply(this,arguments)};var d=function(b,c,d){var e=document.createElement(b).constructor,g=Object.assign(Object.create(e.prototype),a),h=Object.create(g);return Object.defineProperty(h,"selector",{value:b+'[is="'+c+'"]'}),d(h,g),f(c,{prototype:h,"extends":b})},e=function(a,b,c){var d,e={},g=a.prototype.selector.split("["),h=g.length>1;h?(e["extends"]=g[0],d=e["extends"]+'[is="'+b+'"]'):d=b;var i=a.prototype,j=Object.create(i);return Object.defineProperty(j,"selector",{value:d}),c(j,i),e.prototype=j,f(b,e)},f=function(a,b){var c=b.prototype;return c.customAttributes.forEach(function(a){a.addToPrototype(c)}),document.registerElement(a,b)};return c.setTag=function(a,b){a.dataset.tag=b},c.getTag=function(a){return a.dataset.tag},c}(c,e)}),function(a){var b=[],c={},d="routie",e=a[d],f=function(a,b){this.name=b,this.path=a,this.keys=[],this.fns=[],this.params={},this.regex=g(this.path,this.keys,!1,!1)};f.prototype.addHandler=function(a){this.fns.push(a)},f.prototype.removeHandler=function(a){for(var b=0,c=this.fns.length;c>b;b++){var d=this.fns[b];if(a==d)return void this.fns.splice(b,1)}},f.prototype.run=function(a){for(var b=0,c=this.fns.length;c>b;b++)this.fns[b].apply(this,a)},f.prototype.match=function(a,b){var c=this.regex.exec(a);if(!c)return!1;for(var d=1,e=c.length;e>d;++d){var f=this.keys[d-1],g="string"==typeof c[d]?decodeURIComponent(c[d]):c[d];f&&(this.params[f.name]=g),b.push(g)}return!0},f.prototype.toURL=function(a){var b=this.path;for(var c in a)b=b.replace("/:"+c,"/"+a[c]);if(b=b.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=b.indexOf(":"))throw new Error("missing parameters for url: "+b);return b};var g=function(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},h=function(a,d){var e=a.split(" "),g=2==e.length?e[0]:null;a=2==e.length?e[1]:e[0],c[a]||(c[a]=new f(a,g),b.push(c[a])),c[a].addHandler(d)},i=function(a,b){if("function"==typeof b)h(a,b),i.reload();else if("object"==typeof a){for(var c in a)h(c,a[c]);i.reload()}else"undefined"==typeof b&&i.navigate(a)};i.lookup=function(a,c){for(var d=0,e=b.length;e>d;d++){var f=b[d];if(f.name==a)return f.toURL(c)}},i.remove=function(a,b){var d=c[a];d&&d.removeHandler(b)},i.removeAll=function(){c={},b=[]},i.navigate=function(a,b){b=b||{};var c=b.silent||!1;c&&n(),setTimeout(function(){window.location.hash=a,c&&setTimeout(function(){m()},1)},1)},i.noConflict=function(){return a[d]=e,i};var j=function(){return window.location.hash.substring(1)},k=function(a,b){var c=[];return b.match(a,c)?(b.run(c),!0):!1},l=i.reload=function(){for(var a=j(),c=0,d=b.length;d>c;c++){var e=b[c];if(k(a,e))return}},m=function(){a.addEventListener?a.addEventListener("hashchange",l,!1):a.attachEvent("onhashchange",l)},n=function(){a.removeEventListener?a.removeEventListener("hashchange",l):a.detachEvent("onhashchange",l)};m(),a[d]=i}(window),define("routie",function(a){return function(){var b;return b||a.routie}}(this)),define("components/XStatefulElement",["require","xelement"],function(a){"use strict";var b=a("xelement");return b.define("x-stateful-element",function(a,c){var d="state",e=function(a){return new Function(d,"return "+a+";")};a.customAttributes=[b.attribute("props-attr",{type:String,"default":"data-props"})],a.createdCallback=function(){c.createdCallback.call(this),this.pieces=Array.prototype.map.call(this.querySelectorAll("["+this.propsAttr+"]")||[],function(a){return{element:a,template:e(a.getAttribute(this.propsAttr))}},this),this.state={}},a.setState=function(a){var b,c,d,e,f,g,h;for(Object.assign(this.state,a),e=0,f=this.pieces.length;f>e;e++){b=this.pieces[e],d=b.template(this.state);for(c in d)d.hasOwnProperty(c)&&(g=b.element[c],h=d[c],g!==h&&(b.element[c]=d[c]))}}})}),define("components/XNav",["require","xelement","components/XStatefulElement"],function(a){"use strict";var b=a("xelement"),c=a("components/XStatefulElement");return b.extend(c,"x-nav",function(a,b){a.createdCallback=function(){b.createdCallback.call(this),this.state={selected:"selected",page:""}}})}),function(a,b,c){"use strict";var d=function(){function e(a){return!!(a&&"object"==typeof a&&"nodeType"in a&&1===a.nodeType)}function f(a){return a&&"object"==typeof a?Object.keys(a).filter(function(a){return!isNaN(parseInt(a,10))}).splice(-1)[0]:c}function g(a){var b=f(a);return"string"==typeof b?parseInt(b,10):0}function h(a){var b=f(a);return"string"==typeof b?parseInt(b,10)+1:0}function i(a){if("object"!=typeof a||null===a)return 0;var b,c=0;if("function"==typeof Object.keys)c=Object.keys(a).length;else for(b in a)a.hasOwnProperty(b)&&c++;return c}function j(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function k(a,b){if([].forEach)return[].forEach.call(a,b);var c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(a,a[c])}function l(a){return a&&"object"==typeof a&&a[0]?(D=a[0],"undefined"!=typeof a[1]&&i(a[1])>0&&j(E,a[1]),m()&&o()?B():!1):!1}function m(){switch(typeof D){case"string":G=b.getElementById(D);break;case"object":e(D)&&(G=D)}return G}function n(){return G.enctype&&"multipart/form-data"===G.enctype?!0:!1}function o(){return H=G.querySelectorAll("input, textarea, select"),H.length}function p(a){return"INPUT"===a.nodeName&&"radio"===a.type}function q(a){return"INPUT"===a.nodeName&&"checkbox"===a.type}function r(a){return"INPUT"===a.nodeName&&"file"===a.type}function s(a){return"TEXTAREA"===a.nodeName}function t(a){return"SELECT"===a.nodeName&&"select-one"===a.type}function u(a){return"SELECT"===a.nodeName&&"select-multiple"===a.type}function v(a){return"BUTTON"===a.nodeName&&"submit"===a.type}function w(a){return a.checked}function x(b){return a.FileList&&b.files instanceof a.FileList}function y(a){if(p(a))return w(a)?a.value:!1;if(q(a))return w(a)?a.value:!1;if(r(a))return n()?x(a)&&a.files.length>0?a.files:a.value&&""!==a.value?a.value:!1:!1;if(s(a))return a.value&&""!==a.value?a.value:!1;if(t(a))return a.value&&""!==a.value?a.value:a.options&&a.options.length&&""!==a.options[0].value?a.options[0].value:!1;if(u(a)){if(a.options&&a.options.length>0){var b=[];return k(a.options,function(a){a.selected&&b.push(a.value)}),E.includeEmptyValuedElements?b:b.length?b:!1}return!1}return v(a)?a.value&&""!==a.value?a.value:a.innerText&&""!==a.innerText?a.innerText:!1:"undefined"!=typeof a.value?E.includeEmptyValuedElements?a.value:""!==a.value?a.value:!1:!1}function z(a,b,c,d){var e=b[0];if(p(a))return c!==!1?(d[e]=c,c):void 0;if(q(a))return c!==!1?(d[e]||(d[e]=[]),d[e].push(c)):void 0;if(u(a)){if(c===!1)return;d[e]=c}return d[e]=c,c}function A(a,b,c,d){var e=b[0];return b.length>1?"[]"===e?(d[h(d)]={},A(a,b.splice(1,b.length),c,d[g(d)])):d[e]&&i(d[e])>0?A(a,b.splice(1,b.length),c,d[e]):(d[e]={},A(a,b.splice(1,b.length),c,d[e])):1===b.length?"[]"===e?(d[h(d)]=c,d):(z(a,b,c,d),d):void 0}function B(){var a,b,c,d,e=0,f={};for(e=0;e<H.length;e++)b=H[e],!b.name||""===b.name||b.disabled||p(b)&&!w(b)||(c=y(b),(c!==!1||E.includeEmptyValuedElements)&&(a=b.name.match(F),1===a.length&&z(b,a,c?c:"",f),a.length>1&&A(b,a,c?c:"",f)));return d=i(f),d>0?f:!1}if(!(this instanceof d)){var C=new d;return C.init.call(C,Array.prototype.slice.call(arguments))}var D=null,E={includeEmptyValuedElements:!1,w3cSuccessfulControlsOnly:!1},F=/[^\[\]]+|\[\]/g,G=null,H=[];return{init:l}};"function"==typeof define&&define.amd?define("components/../../../bower_components/formToObject.js/dist/formToObject",[],function(){return d}):a.formToObject=d}(window,document),define("components/XForm",["require","xelement","../../../bower_components/formToObject.js/dist/formToObject"],function(a){"use strict";var b=a("xelement"),c=a("../../../bower_components/formToObject.js/dist/formToObject");return b.extend("form","x-form",function(a,b){a.EVENT={CUSTOM_SUBMIT:"x-form.customsubmit"},a.createdCallback=function(){b.createdCallback.call(this),this.createBinding(this,"submit",a.handleSubmit),this.enable()},a.handleSubmit=function(a){a.preventDefault();for(var b,d=this.elements.length,e=!0;void 0!==(b=this.elements[--d]);)b.checkValidity()===!1&&(e=!1);e&&this.trigger(this.EVENT.CUSTOM_SUBMIT,{request:c(this)})}})}),define("components/XList",["require","xelement"],function(a){"use strict";var b=a("xelement");return b.extend("ul","x-list",function(a,b){a.createdCallback=function(){b.createdCallback.call(this),this.elements=[]},a.add=function(a){var b=document.createElement("li");b.appendChild(a),this.appendChild(b),this.elements.push(a)},a.remove=function(a){var b=this.elements.indexOf(a);-1!==b&&(this.removeChild(this.children[b]),this.elements.splice(b,1))},a.empty=function(){this.elements.splice(0,this.elements.length),this.innerHTML=""}})}),define("components/XTodo",["require","xelement","components/XStatefulElement"],function(a){"use strict";var b=a("xelement"),c=a("components/XStatefulElement");return b.extend(c,"x-todo",function(a,c){a.customAttributes=[b.attribute("editing-class",{type:String,"default":"editing"})],a.EVENT={STATUS_CHANGE:"x-todo.complete",TEXT_CHANGE:"x-todo.textchange",REMOVE:"x-todo.remove"},a.createdCallback=function(){c.createdCallback.call(this),this.state={complete:!1,text:""},this.checkbox=this.findWithTag("x-todo.checkbox"),this.editField=this.findWithTag("x-todo.editField"),this.label=this.findWithTag("x-todo.label"),this.blurBinding=this.createBinding(this.editField,"blur",a.handleEditFieldBlur),this.createBinding(this.editField,"keyup",a.handleEditFieldBlur),this.createBinding(this.checkbox,"change",a.handleCheckboxChange),this.createBinding(this.label,"dblclick",a.handleLabelDblClick),this.createBinding(this.findWithTag("x-todo.removalButton"),"click",a.handleRemovalButtonClick),this.enable()},a.handleCheckboxChange=function(a){this.trigger(this.EVENT.STATUS_CHANGE,{complete:a.target.checked})},a.handleRemovalButtonClick=function(){this.trigger(this.EVENT.REMOVE)},a.handleLabelDblClick=function(){this.parentElement.classList.add(this.editingClass),this.editField.value=this.label.textContent,this.editField.select()},a.handleEditFieldBlur=function(a){if("keyup"===a.type){if(27===a.keyCode)return this.blurBinding.disable(),this.parentElement.classList.remove(this.editingClass),void setTimeout(function(){this.blurBinding.enable()}.bind(this),10);if(13!==a.keyCode)return}this.parentElement.classList.remove(this.editingClass),this.label.textContent=this.editField.value,this.trigger(this.EVENT.TEXT_CHANGE,{text:this.editField.value})}})}),define("models/ModelAbstract",["require"],function(a){"use strict";function b(a){this.guid=a||b.generateGUID(),this.props={}}var c=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b.generateGUID=function(){return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()},b.prototype.set=function(a){var b,c=this.props;for(b in a)a.hasOwnProperty(b)&&c.hasOwnProperty(b)&&(c[b]=a[b]);return this},b}),define("models/TodoModel",["require","models/ModelAbstract"],function(a){"use strict";function b(a){c.call(this,a),this.props.text="",this.props.complete=!1}var c=a("models/ModelAbstract");return b.prototype=Object.create(c.prototype),b.prototype.constructor=b,b}),define("repositories/TodoRepository",["require","models/TodoModel"],function(a){"use strict";function b(){this.localModels=[]}var c=a("models/TodoModel");return b.prototype.fetch=function(){var a=JSON.parse(localStorage.getItem("TodoRepository"))||[];return this.localModels=a.map(function(a){return new c(a.guid).set(a.props)}),this.localModels},b.prototype.push=function(a){localStorage.setItem("TodoRepository",JSON.stringify(a)),this.localModels=a},b.prototype.create=function(a){var b=this.fetch(),d=(new c).set(a);return b.push(d),this.push(b),d},b.prototype.update=function(a,b){var c=this.fetch(),d=c.find(function(b){return b.guid===a});return void 0===d?void console.warn('No model with guid "'+a+'" found'):(d.set(b),void this.push(c))},b.prototype["delete"]=function(a){if("string"==typeof a)return this["delete"]([a]);var b=this.fetch();a.forEach(function(a){for(var c,d=b.length;void 0!==(c=b[--d]);)if(c.guid===a){b.splice(d,1);break}},this),this.push(b)},b.prototype.deleteWhere=function(a){for(var b,c,d=this.fetch(),e=[],f=d.length;void 0!==(b=d[--f]);)for(c in a)a.hasOwnProperty(c)&&b.props[c]===a[c]&&e.push(d.splice(f,1)[0]);return this.push(d),e},b}),define("components/XTodoList",["require","xelement","components/XForm","components/XList","components/XStatefulElement","components/XTodo","repositories/TodoRepository"],function(a){"use strict";var b=a("xelement"),c=a("components/XForm"),d=a("components/XList"),e=a("components/XStatefulElement"),f=a("components/XTodo"),g=a("repositories/TodoRepository");return b.extend(e,"x-todo-list",function(a,e){a.createdCallback=function(){e.createdCallback.call(this),this.state={totalCount:0,completedCount:0},this.filter={},this.todoTemplate=this.findWithTag("x-todo-list.todoTemplate"),this.checkAllBox=this.findWithTag("TodosDispatcher:checkAllBox"),this.clearCompletedButton=this.findWithTag("TodosDispatcher:clearCompletedButton"),this.xform=this.getComponent(c,"x-todo-list.xform"),this.xlist=this.getComponent(d,"x-todo-list.xlist"),this.xtodos=[],this.todoRepository=new g,this.createBinding(this.checkAllBox,"change",a.handleCheckAllChange),this.createBinding(this.clearCompletedButton,"click",a.handleClearCompletedClick),this.createBinding(this.xform,this.xform.EVENT.CUSTOM_SUBMIT,a.handleSubmit),this.createBinding(this,f.prototype.EVENT.STATUS_CHANGE,a.handleTodoStatusChange),this.createBinding(this,f.prototype.EVENT.TEXT_CHANGE,a.handleTodoTextChange),this.createBinding(this,f.prototype.EVENT.REMOVE,a.handleTodoRemove),this.enable();var b=this.todoRepository.fetch();Array.prototype.push.apply(this.xtodos,b.map(function(a){return this.createTodoFromModel(a)},this)),this.updateUI()},a.createTodoFromModel=function(a){var c=document.importNode(this.todoTemplate.content,!0),d=c.querySelector(f.prototype.selector);return b.setTag(d,a.guid),d.setState(a.props),d},a.add=function(a){var c=this.filter,d=Object.keys(c),e=this.todoRepository.localModels.filter(function(a){return d.every(function(b){return a.props[b]===c[b]})}),f=e.map(function(a){return a.guid});a.forEach(function(a){var c=b.getTag(a),d=f.indexOf(c)>-1;this.xtodos.push(a),d&&this.xlist.add(a)},this)},a.remove=function(a){a.forEach(function(a){var b=this.xtodos.indexOf(a);b>-1&&this.xtodos.splice(b,1),this.xlist.remove(a)},this)},a.setFilter=function(a){this.filter=a,this.updateList()},a.updateList=function(){this.xlist.empty(),this.add(this.xtodos.splice(0,this.xtodos.length))},a.updateUI=function(){var a=this.todoRepository.localModels,b=a.length;this.setState({totalCount:b,completedCount:a.filter(function(a){return a.props.complete}).length})},a.handleSubmit=function(a){var b=this.todoRepository.create(a.detail.request);this.xtodos.push(this.createTodoFromModel(b)),this.xform.reset(),this.updateList(),this.updateUI()},a.handleTodoStatusChange=function(a){var c=b.getTag(a.target);this.todoRepository.update(c,{complete:a.target.checkbox.checked}),this.updateList(),this.updateUI()},a.handleTodoTextChange=function(a){var c=b.getTag(a.target);this.todoRepository.update(c,{text:a.detail.text})},a.handleTodoRemove=function(a){this.todoRepository["delete"](b.getTag(a.target)),this.remove([a.target]),this.updateUI()},a.handleCheckAllChange=function(a){var c=a.target.checked;this.xtodos.forEach(function(a){var d=b.getTag(a);a.setState({complete:c}),this.todoRepository.update(d,{complete:c})},this),this.updateList(),this.updateUI()},a.handleClearCompletedClick=function(){var a=this.todoRepository.deleteWhere({complete:!0});a.forEach(function(a){this.remove([this.xtodos.find(function(c){return b.getTag(c)===a.guid})])},this),this.updateUI()}})}),define("components/App",["require","xelement","routie","components/XNav","components/XTodoList"],function(a){"use strict";var b=a("xelement"),c=a("routie"),d=a("components/XNav"),e=a("components/XTodoList");return b.extend("html","x-app",function(a,b){a.createdCallback=function(){b.createdCallback.call(this),this.todoList=this.getComponent(e,"app.todoList"),this.nav=this.getComponent(d,"app.nav"),this.registerRoutes()},a.registerRoutes=function(){var a=this;c({"":function(){a.todoList.setFilter({}),a.nav.setState({page:this.path})},"/active":function(){a.todoList.setFilter({complete:!1}),a.nav.setState({page:this.path})},"/completed":function(){a.todoList.setFilter({complete:!0}),a.nav.setState({page:this.path})}})}})}),define("ComponentManifest",["require","components/App","components/XForm","components/XList","components/XNav","components/XTodo","components/XTodoList"],function(a){"use strict";return{App:a("components/App"),XForm:a("components/XForm"),XList:a("components/XList"),XNav:a("components/XNav"),XTodo:a("components/XTodo"),XTodoList:a("components/XTodoList")}}),require(["ComponentManifest"],function(a){}),define("main",function(){});