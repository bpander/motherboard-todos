!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.XElement=b()}(this,function(){var a,b,c,d,e,f;return a=function(){function a(a,b,c){this.target=a,this.type=b,this.handler=c,this.isEnabled=!1}return a.prototype.enable=function(){if(this.isEnabled!==!0){if(this.target instanceof EventTarget)this.target.addEventListener(this.type,this.handler);else if(this.target instanceof NodeList)for(var a=this.target.length;--a>-1;)this.target[a].addEventListener(this.type,this.handler);this.isEnabled=!0}},a.prototype.disable=function(){if(this.target instanceof EventTarget)this.target.removeEventListener(this.type,this.handler);else if(this.target instanceof NodeList)for(var a=this.target.length;--a>-1;)this.target[a].removeEventListener(this.type,this.handler);this.isEnabled=!1},a}(),b=function(){function a(a){this.attrDef=null,this.element=null,this.mqls=[],this.listener=Function.prototype,this.set(a)}return a.prototype.set=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.hasOwnProperty(b)&&(this[b]=a[b])},a.prototype.update=function(){if(this.mqls.forEach(function(a){a.removeListener(this.listener)},this),this.mqls=[],document.contains(this.element)!==!1){var a=this.attrDef.getPropertyName(),b=this.attrDef.parseResponsiveAttribute(this.element[a]),c=b.unmatched;this.listener=function(){var a=this.element[this.attrDef.getEvaluatedPropertyName()];a!==c&&(this.attrDef.mediaChangedCallback.call(this.element,c,a),c=a)}.bind(this),this.mqls=b.breakpoints.map(function(a){var b=window.matchMedia(a.mediaQuery);return b.matches&&(c=a.value),b.addListener(this.listener),b},this)}},a}(),c=function(a,b){var c={customAttributes:[],createdCallback:function(){this.bindings=[],this.mediaDefs=this.customAttributes.filter(function(a){return a.responsive===!0}).map(function(a){return new b({element:this,attrDef:a})},this)},attachedCallback:function(){this.mediaDefs.forEach(function(a){a.update()})},detachedCallback:function(){this.mediaDefs.forEach(function(a){a.update()})},attributeChangedCallback:function(a,b,c){var d=this.customAttributes.find(function(b){return b.name===a});if(void 0!==d){d.changedCallback.call(this,b,c);var e=this.mediaDefs.find(function(a){return a.attrDef===d});if(void 0!==e&&document.contains(this)!==!1){e.update();var f=null===b?""+d["default"]:b,g=d.evaluateResponsiveAttribute(f),h=this[d.getEvaluatedPropertyName()];g!==h&&d.mediaChangedCallback.call(this,g,h)}}},getComponent:function(a,b){var c=a.prototype.selector;return void 0!==b&&(c+='[data-tag="'+b+'"]'),this.querySelector(c)},getComponents:function(a,b){var c=a.prototype.selector;return void 0!==b&&(c+='[data-tag="'+b+'"]'),this.querySelectorAll(c)},findWithTag:function(a){return this.querySelector('[data-tag="'+a+'"]')},findAllWithTag:function(a){return this.querySelectorAll('[data-tag="'+a+'"]')},createBinding:function(b,c,d){var e=new a(b,c,d);return this.bindings.push(e),e},enable:function(){var a,b=this.bindings.length;for(a=0;b>a;a++)this.bindings[a].enable()},disable:function(){var a,b=this.bindings.length;for(a=0;b>a;a++)this.bindings[a].disable()},trigger:function(a,b){var c=new CustomEvent(a,{detail:b});return this.dispatchEvent(c)}};return c}(a,b),d=function(){var a={};return a.toCamelCase=function(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})},a.capitalize=function(a){return a.replace(/./,function(a){return a.toUpperCase()})},a}(),e=function(a){function b(a,b){this.name=a,this.type=null,this["default"]=null,this.responsive=!1,this.mediaChangedCallback=Function.prototype,this.changedCallback=Function.prototype,this.set(b)}return b.prototype.set=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.hasOwnProperty(b)&&(this[b]=a[b])},b.prototype.getPropertyName=function(){return a.toCamelCase(this.name)},b.prototype.getEvaluatedPropertyName=function(){return"current"+a.capitalize(this.getPropertyName())},b.prototype.parseResponsiveAttribute=function(a){var b=a.split(",").map(function(a){return a.trim()}),c=b.pop();return this.type===Number&&(c=+c),{unmatched:c,breakpoints:b.map(function(a){var b=a.split(/\s(?=[^\s]*$)/),c=b[0],d=b[1];return this.type===Number&&(d=+d),{mediaQuery:c,value:d}},this)}},b.prototype.evaluateResponsiveAttribute=function(a){var b=this.parseResponsiveAttribute(a);return b.breakpoints.reduce(function(a,b){return window.matchMedia(b.mediaQuery).matches?b.value:a},b.unmatched)},b.prototype.addToPrototype=function(a){var b=this,c=this.getPropertyName();Object.defineProperty(a,c,{get:function(){var a=this.getAttribute(b.name);switch(b.type){case Number:if(b.responsive!==!0)return(null===a||""===a.trim()||isNaN(+a))&&(a=b["default"]),+a;case String:return null===a&&(a=b["default"]+""),a;case Boolean:return null!==a}},set:function(a){switch(b.type){case Number:if(b.responsive!==!0){if(isNaN(+a))break;this.setAttribute(b.name,a);break}case String:this.setAttribute(b.name,a);break;case Boolean:a?this.setAttribute(b.name,""):this.removeAttribute(b.name)}}}),b.responsive===!0&&Object.defineProperty(a,this.getEvaluatedPropertyName(),{get:function(){return b.evaluateResponsiveAttribute(this[c])}})},b}(d),f=function(a,b){function c(){}c.attribute=function(a,c){return new b(a,c)},c.define=function(b,c){var d=HTMLElement.prototype,e=Object.create(d);return Object.assign(e,a),Object.defineProperty(e,"selector",{value:b}),c(e,a,d),f(b,{prototype:e})},c.extend=function(){return"string"==typeof arguments[0]?d.apply(this,arguments):e.apply(this,arguments)};var d=function(b,c,d){var e=document.createElement(b).constructor.prototype,g=Object.create(e);return Object.assign(g,a),Object.defineProperty(g,"selector",{value:b+'[is="'+c+'"]'}),d(g,a,e),f(c,{prototype:g,"extends":b})},e=function(b,c,d){var e,g={},h=b.prototype.selector.split("["),i=h.length>1;i?(g["extends"]=h[0],e=g["extends"]+'[is="'+c+'"]'):e=c;var j=b.prototype,k=Object.create(j);return Object.defineProperty(k,"selector",{value:e}),d(k,a,j),g.prototype=k,f(c,g)},f=function(a,b){var c=b.prototype;return c.customAttributes.forEach(function(a){a.addToPrototype(c)}),document.registerElement(a,b)};return c}(c,e)});